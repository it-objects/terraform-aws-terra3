import{_ as a,c as t,a0 as s,o as n}from"./chunks/framework.D5XSuxOt.js";const i="/assets/61734921.0vgQ6sLA.png",o="/assets/62816257.MgEpcZ9Z.png",l="/assets/61997065._FKe1yuM.png",b=JSON.parse('{"title":"Getting Started","description":"","frontmatter":{},"headers":[],"relativePath":"getting-started.md","filePath":"getting-started.md","lastUpdated":1736934310000}'),r={name:"getting-started.md"};function p(d,e,h,c,u,m){return n(),t("div",null,e[0]||(e[0]=[s('<h1 id="getting-started" tabindex="-1">Getting Started <a class="header-anchor" href="#getting-started" aria-label="Permalink to &quot;Getting Started&quot;">​</a></h1><p>This getting started guide will help you deploy your first environment using Terra3. This guide is split across three steps:</p><ol><li><p>Deploying a static website served from an S3 bucket and AWS Cloudfront</p></li><li><p>Deploying all from step 1 + an nginx demo container on AWS ECS</p></li><li><p>Deploying all from step 1 &amp; 2 + providing your own domain name and enabling TLS between Cloudfront and the Application Loadbalancer</p></li></ol><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><p>First, ensure that you have installed the following tools locally.</p><ol><li><p><a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" target="_blank" rel="noreferrer">aws cli</a></p></li><li><p><a href="https://learn.hashicorp.com/tutorials/terraform/install-cli" target="_blank" rel="noreferrer">terraform</a></p></li></ol><h3 id="clone-the-repo" tabindex="-1">Clone the repo <a class="header-anchor" href="#clone-the-repo" aria-label="Permalink to &quot;Clone the repo&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>git clone https://github.com/it-objects/terraform-aws-terra3.git</span></span></code></pre></div><h2 id="deployment-steps-for-example-1" tabindex="-1">Deployment Steps for Example 1 <a class="header-anchor" href="#deployment-steps-for-example-1" aria-label="Permalink to &quot;Deployment Steps for Example 1&quot;">​</a></h2><p>Example 1 will provision a subset of the overall 3-tier architecture, namely</p><ul><li>the static website served from an S3 bucket and AWS Cloudfront</li></ul><p>as depicted in this diagram:</p><p><img src="'+i+`" alt=""></p><h3 id="terraform-init" tabindex="-1">Terraform INIT <a class="header-anchor" href="#terraform-init" aria-label="Permalink to &quot;Terraform INIT&quot;">​</a></h3><p>CD into the examples directory:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd terraform-aws-terra3/examples/example_1</span></span></code></pre></div><p>Initialize the working directory with the following:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform init</span></span></code></pre></div><h3 id="terraform-plan" tabindex="-1">Terraform PLAN <a class="header-anchor" href="#terraform-plan" aria-label="Permalink to &quot;Terraform PLAN&quot;">​</a></h3><p>Verify the resources that will be created by this execution:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform plan</span></span></code></pre></div><h3 id="terraform-apply" tabindex="-1">Terraform APPLY <a class="header-anchor" href="#terraform-apply" aria-label="Permalink to &quot;Terraform APPLY&quot;">​</a></h3><p>Let’s provision this example.</p><p>Note: make sure that the AWS CLI is correctly configured and that you’re deploying to the right AWS account.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform apply</span></span></code></pre></div><h3 id="validation" tabindex="-1">Validation <a class="header-anchor" href="#validation" aria-label="Permalink to &quot;Validation&quot;">​</a></h3><p>After about 30-60 seconds, the script has been applied and a Cloudfront URL is shown similar to this one:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cloudfront_default_domain_name = &quot;dcot74k2131h8.cloudfront.net&quot;</span></span></code></pre></div><p>Use it in your browser to test the static website deployed to S3 and served via Cloudfront.</p><p>Please note: it requires another 30 seconds, until the Cloudfront distribution is ready and the website is presented correctly.</p><p>It could look something like this when you use the command line tool “curl” to query the URL:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>❯ curl https://dcot74k2131h8.cloudfront.net  </span></span>
<span class="line"><span>&lt;h1&gt;Hello world, Terra3!&lt;/h1&gt;%</span></span></code></pre></div><p>Go to the S3 section in your AWS web console and find the S3 bucket with the index.html file. Feel free, to edit the file and see the change being reflected when reloading the page in your browser.</p><h3 id="finalization" tabindex="-1">Finalization <a class="header-anchor" href="#finalization" aria-label="Permalink to &quot;Finalization&quot;">​</a></h3><p>To clean up your AWS account, issue the following command which will remove all previously provisioned AWS resources.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform destroy</span></span></code></pre></div><h2 id="deployment-steps-for-example-2" tabindex="-1">Deployment Steps for Example 2 <a class="header-anchor" href="#deployment-steps-for-example-2" aria-label="Permalink to &quot;Deployment Steps for Example 2&quot;">​</a></h2><p>Example 2 will provision a more advanced subset of the overall 3-tier architecture, namely</p><ul><li><p>the static website served from an S3 bucket and AWS Cloudfront and</p></li><li><p>an ECS task with two containers</p></li></ul><p>as depicted in this diagram:</p><p><img src="`+o+`" alt=""></p><h3 id="terraform-init-1" tabindex="-1">Terraform INIT <a class="header-anchor" href="#terraform-init-1" aria-label="Permalink to &quot;Terraform INIT&quot;">​</a></h3><p>CD into the examples directory:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd terraform-aws-terra3/examples/example_2</span></span></code></pre></div><p>Initialize the working directory with the following:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform init</span></span></code></pre></div><h3 id="terraform-plan-1" tabindex="-1">Terraform PLAN <a class="header-anchor" href="#terraform-plan-1" aria-label="Permalink to &quot;Terraform PLAN&quot;">​</a></h3><p>Verify the resources that will be created by this execution:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform plan</span></span></code></pre></div><h3 id="terraform-apply-1" tabindex="-1">Terraform APPLY <a class="header-anchor" href="#terraform-apply-1" aria-label="Permalink to &quot;Terraform APPLY&quot;">​</a></h3><p>Let’s provision the first example.</p><p>Note: make sure that the AWS CLI is correctly configured and that you’re deploying to the right AWS account.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform apply</span></span></code></pre></div><h3 id="validation-1" tabindex="-1">Validation <a class="header-anchor" href="#validation-1" aria-label="Permalink to &quot;Validation&quot;">​</a></h3><p>After about 4 minutes, the script has been applied and a Cloudfront URL is shown similar to this one:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cloudfront_default_domain_name = &quot;dcot74k2131h8.cloudfront.net&quot;</span></span></code></pre></div><p>Use it in your browser to test the static website deployed to S3 and served via Cloudfront. Append “/api/” to the end of the URL to check that traffic is routed correctly to your nginxdemos/hello container via the application load balancer.</p><p>Please note: it requires another 30 seconds, until the Cloudfront distribution and the containers are ready and the website is presented correctly.</p><p>It could look something like this when you use the command line tool “curl” to query the URL:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>❯ curl https://dcot74k2131h8.cloudfront.net  </span></span>
<span class="line"><span>&lt;h1&gt;Hello world, Terra3!&lt;/h1&gt;%  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>❯ curl https://dcot74k2131h8.cloudfront.net/api/  </span></span>
<span class="line"><span>&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span>&lt;html&gt;</span></span>
<span class="line"><span>&lt;head&gt;</span></span>
<span class="line"><span>&lt;title&gt;Hello World&lt;/title&gt;</span></span>
<span class="line"><span>...</span></span></code></pre></div><p>Go to the ECS section in your AWS web console and find the ECS cluster. You should be able to see the task with two containers you just have deployed. The</p><h3 id="finalization-1" tabindex="-1">Finalization <a class="header-anchor" href="#finalization-1" aria-label="Permalink to &quot;Finalization&quot;">​</a></h3><p>To clean up your AWS account, issue the following command which will remove all previously provisioned AWS resources.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform destroy</span></span></code></pre></div><h2 id="deployment-steps-for-example-3" tabindex="-1">Deployment Steps for Example 3 <a class="header-anchor" href="#deployment-steps-for-example-3" aria-label="Permalink to &quot;Deployment Steps for Example 3&quot;">​</a></h2><p>Example 3 will provision an even more advanced subset of the overall 3-tier architecture, namely</p><ul><li><p>the static website served from an S3 bucket and AWS Cloudfront and</p></li><li><p>an ECS task with two containers and</p></li><li><p>your own domain + ACM certificates</p></li></ul><p>as depicted in this diagram:</p><p><img src="`+l+`" alt=""></p><p>A subdomain will be created named after the name of your solution (solution_name parameter). Also a second subdomain will be created for your loadbalancer so that we also achieve a transport encryption with TLS between Cloudfront and the Application Loadbalancer.</p><p><strong>Please note: there’s a prerequisite to this example. A Route53 Hosted Zone needs to be provisioned into your account already, with a domain attached to it. The ID of the hosted zone is required as input parameter, so that the Terraform script can be executed.</strong></p><h3 id="terraform-init-2" tabindex="-1">Terraform INIT <a class="header-anchor" href="#terraform-init-2" aria-label="Permalink to &quot;Terraform INIT&quot;">​</a></h3><p>CD into the examples directory:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd terraform-aws-terra3/examples/example_3</span></span></code></pre></div><p>Initialize the working directory with the following:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform init</span></span></code></pre></div><h3 id="update-route53-hosted-zone-id" tabindex="-1">Update Route53 Hosted Zone Id <a class="header-anchor" href="#update-route53-hosted-zone-id" aria-label="Permalink to &quot;Update Route53 Hosted Zone Id&quot;">​</a></h3><p>As mentioned in the prerequisite to this example, please open the <a href="http://main.tf" target="_blank" rel="noreferrer">main.tf</a> file and enter the Route53 hosted zone ID.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>locals {</span></span>
<span class="line"><span>  route53_zone_id = &quot;&lt;PLEASE ENTER HERE THE HOSTED ZONE ID&gt;&quot;  </span></span>
<span class="line"><span>  solution_name   = &quot;terra3-example3&quot;</span></span>
<span class="line"><span>}</span></span></code></pre></div><h3 id="terraform-plan-2" tabindex="-1">Terraform PLAN <a class="header-anchor" href="#terraform-plan-2" aria-label="Permalink to &quot;Terraform PLAN&quot;">​</a></h3><p>Verify the resources that will be created by this execution:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform plan</span></span></code></pre></div><h3 id="terraform-apply-2" tabindex="-1">Terraform APPLY <a class="header-anchor" href="#terraform-apply-2" aria-label="Permalink to &quot;Terraform APPLY&quot;">​</a></h3><p>Let’s provision the first example.</p><p>Note: make sure that the AWS CLI is correctly configured and that you’re deploying to the right AWS account.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform apply</span></span></code></pre></div><h3 id="validation-2" tabindex="-1">Validation <a class="header-anchor" href="#validation-2" aria-label="Permalink to &quot;Validation&quot;">​</a></h3><p>After about 6 minutes, the script has been applied and a Cloudfront URL is shown similar to this one:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cloudfront_default_domain_name = &quot;dcot74k2131h8.cloudfront.net&quot;</span></span></code></pre></div><p>Please note: it requires another 30 seconds, until the Cloudfront distribution is ready and the website is presented correctly.</p><p>Use it in your browser to test the static website deployed to S3 and served via Cloudfront. If you have setup a hosted zone correctly with your domain, you should now also be able to use your domain name in your browser following this schema:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;solution_name&gt;.&lt;domain_name given in your hosted zone&gt;, e.g.</span></span>
<span class="line"><span>terra3-example3.terra3.io where &quot;terra3-example3&quot; is the solution_name and terra3.io the hosted zone domain name.</span></span></code></pre></div><p>It could look something like this when you use the command line tool “curl” to query the URL:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>❯ curl https://terra3-example3.terra3.io       # use your domain name here, as this example won&#39;t work  </span></span>
<span class="line"><span>&lt;h1&gt;Hello world, Terra3!&lt;/h1&gt;%  </span></span>
<span class="line"><span></span></span>
<span class="line"><span>❯ curl https://terra3-example3.terra3.io/api/  # use your domain name here, as this example won&#39;t work  </span></span>
<span class="line"><span>&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span>&lt;html&gt;</span></span>
<span class="line"><span>&lt;head&gt;</span></span>
<span class="line"><span>&lt;title&gt;Hello World&lt;/title&gt;</span></span>
<span class="line"><span>...</span></span></code></pre></div><p>Go to the ECS section in your AWS web console and find the ECS cluster. You should be able to see the task with two containers you just have deployed. The</p><p>Go to the EC2 section, select the bastion host from the list and click on &quot;Connect&quot;. Select the &quot;Session Manager&quot; tab and click connect. Now, you should be able to shell into the EC2 instance in the most secure way. After installing the mysql client, you should also be able to access the RDS MySQL database, as security groups are configured accordingly.</p><h3 id="finalization-2" tabindex="-1">Finalization <a class="header-anchor" href="#finalization-2" aria-label="Permalink to &quot;Finalization&quot;">​</a></h3><p>To clean up your AWS account, issue the following command which will remove all previously provisioned AWS resources.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>terraform destroy</span></span></code></pre></div>`,99)]))}const f=a(r,[["render",p]]);export{b as __pageData,f as default};
